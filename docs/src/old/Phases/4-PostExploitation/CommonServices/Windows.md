# Server Message Block (SMB)
## Windows
### Windows CMD - DIR
- `dir \\192.168.220.129\Finance\`

### Windows CMD - Net Use
- `net use n: \\192.168.220.129\Finance`

The command net use connects a computer to or disconnects a computer from a shared resource or displays information about computer connections. We can connect to a file share with the following command and map its content to the drive letter n.

- `net use n: \\192.168.220.129\Finance /user:plaintext Password123`
We can also provide a username and password to authenticate to the share.

### Windows CMD - DIR
- `dir n: /a-d /s /b | find /c ":\"`

- `dir n:\*cred* /s /b`
- `dir n:\*secret* /s /b`
- `findstr /s /i cred n:\*.*`

If we want to search for a specific word within a text file, we can use findstr.

    cred
    password
    users
    secrets
    key
    Common File Extensions for source code such as: .cs, .c, .go, .java, .php, .asp, .aspx, .html


Let's replicate the same commands now using Powershell.

### Windows PowerShell
- `Get-ChildItem \\192.168.220.129\Finance\`

- `New-PSDrive -Name "N" -Root "\\192.168.220.129\Finance" -PSProvider "FileSystem"`

```
PS C:\htb> $username = 'plaintext'
PS C:\htb> $password = 'Password123'
PS C:\htb> $secpassword = ConvertTo-SecureString $password -AsPlainText -Force
PS C:\htb> $cred = New-Object System.Management.Automation.PSCredential $username, $secpassword
PS C:\htb> New-PSDrive -Name "N" -Root "\\192.168.220.129\Finance" -PSProvider "FileSystem" -Credential $cred
```

### Windows PowerShell - GCI
```
N:
(Get-ChildItem -File -Recurse | Measure-Object).Count
```

- `Get-ChildItem -Recurse -Path N:\ -Include *cred* -File`

- `Get-ChildItem -Recurse -Path N:\ | Select-String "cred" -List`
